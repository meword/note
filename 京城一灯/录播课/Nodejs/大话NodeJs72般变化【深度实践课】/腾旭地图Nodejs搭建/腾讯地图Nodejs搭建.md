http 和其他 UDP 协议协议会丢包、会挂

Unix Domain Socket 是进程间复制数据，进程间交换数据



#### 预备上线

+ 前端工程化的搭载动态文件的MAP分析压缩打包合并至CND
+ 单测、压测、性能分析工具发现BUG
+ 编写 nginx-conf 实现负载均衡和反向代理
+ PM2 启动应用程序小流量灰度上线，修复 BUG



#### 服务器集群

首先用户访问负载均衡服务器(Nginx或LVS)，然后通过负载均衡服务器会将我们带到一台当前最闲置的服务器(PM2)，然后服务器去访问缓存服务器，判断是否能从缓存取到数据，如果可以取到，直接返回数据。如果不可以，则继续访问业务处理服务器(Java)，业务处理服务器需要操作数据库，则找到数据库服务器集群，数据库服务器有读写操作，每个操作都会有容灾机制(一但发现执行有错误，则迅速还原数据库)。

静态资源服务器：CDN存放所有的静态资源文件，CDN则是在离用户最近的一台服务器上

Nagios当前对应的节点时刻做监控

服务器和服务器之间要有高可用的心跳检测(keepalived、heartbear)(即检测要连接的服务器是否还能使用)